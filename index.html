<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞</title>
    <style>
        .important-element {
            padding: 10px;
            background-color: lightblue;
        }

        .new-important-element {
            padding: 10px;
            background-color: rgb(255, 183, 0);
        }

        button {
            margin: 10px;
            padding: 10px;
            border: 1px solid #000;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div id="importantElement1" class="important-element">
        <span>
            üï∂
            <span id="importantElement1Text">
                –≠—Ç–æ –≤–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 1. –ù–µ —Å–∫—Ä—ã–≤–∞–π –µ–≥–æ —Å–ª—É—á–∞–π–Ω–æ!
            </span>
        </span>

    </div>
    <div id="importantElemenNext" class="important-element">
        <span>
            üï∂
            <span id="importantElement2Text">
                –≠—Ç–æ –≤–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 2. –ù–µ —Å–∫—Ä—ã–≤–∞–π –µ–≥–æ —Å–ª—É—á–∞–π–Ω–æ!
            </span>
        </span>
    </div>
    <div>
        <button id="replaceButton1">–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ - removeChild + appendChild</button>
        <br />
        <button id="replaceButton2">–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ - replaceChild</button>
        <br />
        <button id="replaceButton3">–ó–∞–º–µ–Ω–∏—Ç—å id –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ</button>
        <br />
        <button id="replaceButton4">–ó–∞–º–µ–Ω–∏—Ç—å class –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ</button>
        <br />
        <button id="replaceButton5">–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ</button>
    </div>


    <script>
        let id = 1;
        let importantElement1 = document.getElementById(`importantElement${id}`);

        const replaceButton1 = document.getElementById('replaceButton1');
        const replaceButton2 = document.getElementById('replaceButton2');
        const replaceButton3 = document.getElementById('replaceButton3');
        const replaceButton4 = document.getElementById('replaceButton4');
        const replaceButton5 = document.getElementById('replaceButton5');

        replaceButton1.addEventListener('click', () => {
            importantElement1 = document.getElementById(`importantElement${id}`);
            console.log(`importantElement${id}`, importantElement1);

            const parentNode = importantElement1.parentNode;
            console.log('parentNode', parentNode);

            const clonedElement = importantElement1.cloneNode(true);
            clonedElement.id = `importantElement${id + 1}`;
            id++;

            console.log('clonedElement', clonedElement);

            clonedElement.style.display = 'block';

            parentNode.removeChild(importantElement1);
            parentNode.appendChild(clonedElement);

        });

        replaceButton2.addEventListener('click', () => {
            importantElement1 = document.getElementById(`importantElement${id}`);
            console.log(`importantElement${id}`, importantElement1);

            const clonedElement = importantElement1.cloneNode(true);
            clonedElement.id = `importantElement${id + 1}`;
            id++;

            console.log('clonedElement', clonedElement);

            clonedElement.style.display = 'block';

            importantElement1.parentNode.replaceChild(clonedElement, importantElement1);
        });

        replaceButton3.addEventListener('click', () => {
            importantElement1 = document.getElementById(`importantElement${id}`);
            console.log(`importantElement${id}`, importantElement1);

            importantElement1.id = `importantElement${id + 1}`;
            id++;
        });

        replaceButton4.addEventListener('click', () => {
            importantElement1 = document.getElementById(`importantElement${id}`);
            console.log(`importantElement${id}`, importantElement1);

            importantElement1.classList.remove('important-element');
            importantElement1.classList.add('new-important-element');

        });

        replaceButton5.addEventListener('click', () => {


            const importantElement1Text = document.getElementById(`importantElement1Text`);
            console.log(`importantElement1Text`, importantElement1Text);

            importantElement1Text.textContent = '–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç';
        });


        // –°–æ–∑–¥–∞–µ–º MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∏–ª–µ–π
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                console.log('mutation', mutation.type, mutation.target, mutation.addedNodes);
            });
        });

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–∞
        observer.observe(importantElement1, { attributes: true, childList: true, subtree: true });
    </script>
</body>

</html>